#################################################################
##  Global Configuration                                       ##
#################################################################
global:
  ## Deployment edition: "ce" (Community) or "ee" (Enterprise)
  edition: "ee"

  ## Gateway configuration
  gateway:
    ## GatewayClass controller that will reconcile Gateway / HTTPRoute resources.
    ## Choose the controller according to the Gateway implementation you use.
    ## Examples:
    ## - gateway.envoyproxy.io/gatewayclass-controller  (Envoy Gateway)
    ## - istio.io/gateway-controller                    (Istio)
    ## - io.cilium/gateway-controller                   (Cilium)
    controllerName: gateway.envoyproxy.io/gatewayclass-controller

    ## Gateway service configuration
    ## type: Service type (LoadBalancer or NodePort)
    ## nodePorts: Optional NodePort mapping (if using NodePort)
    service:
      type: "LoadBalancer"          # Service type: LoadBalancer or NodePort
      nodePorts: {}
        # http: 30080
        # https: 30443
        # gitssh: 30022

    ## Base external domain used to expose CSGHub services
    external:
      domain: "csghub.example.com"   # e.g. csghub.example.com, example.com
      # public: "public.example.com" # Optional public access domain override.
                                     # If empty, the domain will be derived automatically.
                                     # NOTE: When base domain is a second-level domain (e.g. example.com),
                                     # a subdomain (e.g. csghub.example.com) will be used internally
                                     # to avoid overly broad wildcard routing such as *.example.com

    ## TLS/SSL configuration for Gateway
    tls:
      enabled: false                # Enable TLS termination on the Gateway
      # secretName: ""              # Kubernetes TLS secret name (required if TLS is enabled)

  ## Image management
  image:
    registry: "docker.io"           # Image global registry, opencsg-registry.cn-beijing.cr.aliyuncs.com for mainland
    registryPolicy: "default"       # default or force, force will overwrite all others registries
    tag: "v1.16.0"                  # Image tag format: {{version}}-{{edition}}
    pullPolicy: "IfNotPresent"      # Image pull policy: Always, IfNotPresent, Never
    pullSecrets: []                 # Private registry authentication secrets

  ## Persistent volume configuration
  persistence:
    # storageClass: ""              # StorageClass name (empty for default)
    accessModes: ["ReadWriteOnce"]  # Volume access modes
    size: "10Gi"                    # Default storage capacity

  ## Database configuration
  postgresql:
    ## Use built-in (true) or external (false)
    enabled: true
    ## External PostgreSQL connection
    external: {}
      # host: "<pg_host>"           # PostgreSQL host address
      # port: 6432                  # PostgreSQL port
      # user: "csghub"              # Database username
      # password: ""                # Database password
      # timezone: "Etc/UTC"         # Database timezone
      # sslmode: "prefer"           # SSL mode

  ## Redis configuration
  redis:
    ## Use built-in (true) or external (false)
    enabled: true
    ## External Redis configuration
    external: {}
      # host: "<redis_host>"        # Redis server hostname or IP
      # port: 6379                  # Redis port number
      # password: ""                # Redis authentication password

  ## MongoDB configuration
  mongo:
    ## Use built-in (true) or external (false)
    enabled: true
    ## External Mongo configuration
    external: {}
      # host: "<mongo_host>"        # Mongo server hostname or IP
      # port: 27017                 # Mongo  port number
      # user: "root"                # Mongo authentication user
      # password: ""                # Mongo authentication password

  ## Object storage configuration
  objectStore:
    ## Use built-in (true) or external (false)
    enabled: true
    ## External Object Storage
    external: {}
      # endpoint: ""                # Object storage endpoint URL
      # accessKey: ""               # Access key for authentication
      # secretKey: ""               # Secret key for authentication
      # region: "cn-north-1"        # Storage region
      # encrypt: "false"            # Enable server-side encryption
      # secure: "false"             # Use HTTPS for connections
      # pathStyle: "true"           # Use path-style addressing

  ## Container Registry configuration
  registry:
    ## Use built-in (true) or external (false)
    enabled: true
    ## External Container Registry
    external: {}
      # registry: ""                # External registry URL
      # repository: "csghub"        # Repository namespace
      # username: ""                # Registry username
      # password: ""                # Registry password
      # insecure: "false"           # Disable TLS/SSL encryption

  ## Gitaly configuration
  gitaly:
    ## Use built-in (true) or external (false)
    enabled: true
    ## External Gitaly configuration
    external: {}
      # scheme: "tcp"               # Connection scheme: tcp, tls, unix
      # host: "<gitaly_host>"       # Gitaly server hostname or IP
      # port: 8075                  # Gitaly port number
      # token: ""                   # Authentication token
      # storage: "default"          # Storage name for repositories

  ## Dataflow configuration
  dataflow:
    ## Use built-in (true) or external (false)
    enabled: true
    ## External Dataflow configuration
    external: {}
      # host: "<dataflow_host>"     # Dataflow server hostname or IP
      # port: 80                    # Dataflow port number

  ## SubChart deployment context
  chartContext:
    isBuiltIn: true                 # deployed bundled with csghub

#################################################################
##  CSGHub Core Configuration                                  ##
#################################################################
## All CSGHub services using this as default local image configuration (except Portal)
## Global image configuration
image:
  # registry: "docker.io"
  repository: "opencsghq/csghub-server"
  tag: "v1.16.0"
  pullPolicy: "IfNotPresent"
  pullSecrets: []

## Logging configuration
logging:
  level: "info"                            # Log level: info, warning, debug, error

## Environments configuration
environments: {}

## Portal service configuration
portal:
  ## Image settings (overrides global.image)
  image:
    repository: "opencsghq/csghub-portal"  # Portal image repository

  ## Gateway configuration
  gateway:
    enabled: true                          # Enable or disable gateway
    tls: {}                                # TLS settings for gateway
      # enabled: false                     # Enable or disable TLS
      # secretName: ""                     # TLS secret name (if enabled)

  ## Documentation center links
  docs: {}
    # domain: ""                           # External docs domain (creates ExternalName service)
    # host: "192.168.18.10"                # Docs service host
    # port: "8003"                         # Docs service port

  ## Database configuration
  postgresql: {}
    # host: "<pg_host>"                    # PostgreSQL host address
    # port: 5432                           # PostgreSQL port
    # database: "csghub_portal"            # Database name
    # user: "csghub"                       # Database username
    # password: ""                         # Database password
    # timezone: "Etc/UTC"                  # Database timezone
    # sslmode: "prefer"                    # SSL mode

  ## Object storage configuration
  objectStore: {}
    # endpoint: ""                         # Object storage endpoint URL
    # accessKey: ""                        # Access key for authentication
    # secretKey: ""                        # Secret key for authentication
    # bucket: "csghub-portal-public"       # Bucket name
    # region: ""                           # Storage region
    # secure: "false"                      # Use secure TLS certificates
    # encrypt: "false"                     # Enable TLS encryption
    # pathStyle: "true"                    # Use path-style addressing

## Main service logic and API interface
server:
  ## Image settings (overrides global.image)
  image: {}

  ## GitLab SSH configuration
  gitlabShell: {}
    # sshPort: "22"                        # GitLab SSH port

  ## Multi-sync service configuration
  multiSync:
    enabled: true                          # Enable or disable multi-sync service
    proxy: ""                              # Proxy for model synchronization

  ## API documentation
  swaggerAPI:
    enabled: false                         # Enable Swagger API assistants

  ## S3 Proxy
  enablePresignedUrlProxy: true            # Enable S3 proxy

  ## Agent configuration
  agent:
    langflow: {}
      # host: ""                           # AgentHub address
      # token: ""                          # AgentHub Token
      # instanceQuotaPerUser: 5
      # codeInstanceQuotaPerUser: 5

  ## CSGBot configuration
  csgbot: {}
    # host: ""                             # CSGBot address
    # port: "8070"                         # CSGBot port

  ## Memory service client configuration
  memory:
    enabled: true                          # Enable memory service integration
    host: "http://csghub-memmachine"       # Memory service host
    port: 8080                             # Memory service port
    basePath: "/api/v2"                    # Memory service base path
    apiKey: ""                             # Memory service API key
    timeoutSeconds: 10                     # Request timeout in seconds
    retryCount: 1                          # Retry attempts
    retryDelayMillis: 100                  # Retry delay in milliseconds

  ## Database configuration
  postgresql: {}
    # host: "<pg_host>"                    # PostgreSQL host address
    # port: 5432                           # PostgreSQL port
    # database: "csghub_server"            # Database name
    # user: "csghub"                       # Database username
    # password: ""                         # Database password
    # timezone: "Etc/UTC"                  # Database timezone
    # sslmode: "prefer"                    # SSL mode

  ## Redis configuration
  redis: {}
    # host: "<redis_host>"                 # Redis server hostname or IP
    # port: 6379                           # Redis port number
    # password: ""                         # Redis authentication password

  ## Object storage configuration
  objectStore: {}
    # endpoint: ""                         # Object storage endpoint URL
    # accessKey: ""                        # Access key for authentication
    # secretKey: ""                        # Secret key for authentication
    # bucket: "csghub-server"              # Bucket name
    # region: ""                           # Storage region
    # secure: "false"                      # Use secure TLS certificates
    # encrypt: "false"                     # Enable TLS encryption
    # pathStyle: "true"                    # Use path-style addressing

  ## XNet storage configuration
  xnet: {}
    # endpoint: ""                         # Xnet endpoint
    # apiKey: ""                           # Server Hub API Token

## Reverse proxy configuration
rproxy:
  ## CoreDNS configuration (deprecated from v1.12.0, retained for compatibility)
  coredns:
    enabled: false                         # Enable or disable CoreDNS
    image:
      repository: "coredns/coredns"        # CoreDNS image repository
      tag: "1.11.1"                        # CoreDNS image tag

  ## Nginx configuration (deprecated from v1.12.0, retained for compatibility)
  nginx:
    enabled: false                         # Enable or disable Nginx
    image:
      repository: "nginx"                  # Nginx image repository
      tag: "latest"                        # Nginx image tag

## Notification service configuration
notifier:
  repoSyncTime: "Asia/Shanghai"            # Timezone for repository synchronization

  ## SMTP notification settings
  smtp: {}
    # host: ""                             # SMTP server host
    # port: 465                            # SMTP server port
    # username: ""                         # SMTP username
    # password: ""                         # SMTP password

  ## FeiShu notification settings
  feiShu: {}
    # appId: ""                            # FeiShu bot Application ID
    # appSecret: ""                        # FeiShu bot Application Secret

## Payment service configuration
payment:
  billingBucket: "csghub-billing"          # Bucket for storing billing data

## AIGateway service configuration
aigateway:
  ## AI Gateway configuration
  aigateway: {}

  ## Content moderation configuration
  moderation:
    enabled: false                         # Enable or disable content moderation
    ## External moderation service settings
    # endpoint: ""                         # Moderation API endpoint URL
    # accessKeyId: ""                      # Access key for authentication
    # accessKeySecret: ""                  # Secret key for authentication
    # region: ""                           # Service region
    # enableSSL: true                      # Enable SSL/TLS for secure communication

## XNet service configuration
xnet:
  image:
    # registry: "docker.io"
    repository: "opencsghq/csghub-xnet"
    tag: "v1.16.0"
    pullPolicy: "IfNotPresent"
    pullSecrets: []

  ## Service configuration
  service: {}
    # port: 8097

  ## Database configuration
  postgresql: {}
    # host: "<pg_host>"                    # PostgreSQL host address
    # port: 5432                           # PostgreSQL port
    # database: "csghub_xnet"              # Database name
    # user: "csghub"                       # Database username
    # password: ""                         # Database password
    # timezone: "Etc/UTC"                  # Database timezone
    # sslmode: "prefer"                    # SSL mode

  ## Redis configuration
  redis: {}
    # host: "<redis_host>"                 # Redis server hostname or IP
    # port: 6379                           # Redis port number
    # password: ""                         # Redis authentication password

  ## Object storage configuration
  objectStore: {}
    # endpoint: ""                         # Object storage endpoint URL
    # accessKey: ""                        # Access key for authentication
    # secretKey: ""                        # Secret key for authentication
    # bucket: "csghub-xnet"                # Bucket name
    # region: ""                           # Storage region
    # secure: "false"                      # Use secure TLS certificates
    # encrypt: "false"                     # Enable TLS encryption
    # pathStyle: "true"                    # Use path-style addressing

## Runner configuration
runner:
  enabled: true                          # Enable or disable internal runner

  ## Runner operation and communication
  region: "region-0"                     # Region the runner belongs to
  interval: 60                           # Communication interval with server (seconds)

  ## Namespace management
  namespace: "spaces"                    # Namespace for user-deployed workloads
  autoConfigure: true                    # Automatically install knative/argo/lws
  mergingNamespace: "disable"            # Namespace merging: multi, single, disable

  ## Networking configuration
  usePublicDomain: true                  # Use public domain for application access

  ## Package and image management
  pipIndexUrl: "https://pypi.tuna.tsinghua.edu.cn/simple/"  # Custom pip repository
  extraBuildArgs: []                     # Extra Kaniko build arguments
  model:                                 # Model image configuration
    deployTimeout: "60"                  # Timeout (in seconds) for model deployment operations
    registry: ""                         # Custom image registry for model-related images (empty uses global registry)

  ## GPU resource configuration
  gpuModelLabel:
    typeLabel: "nvidia.com/gpu.product"  # GPU type label
    capacityLabel: "nvidia.com/gpu"      # GPU capacity label

  ## Knative networking configuration
  ## e.g. http://<load balancer ip> or http://kourier-internal.kourier-system.svc.cluster.local
  applicationEndpoint: ""

  ## Host network interface name used for inter-node communication during distributed (LWS) inference
  ## e.g. eth0
  networkInterface: ""

  ## Kubernetes StorageClass name for persistent volume provisioning for space
  # Example values: "local-path", "gp2"
  storageClassName: ""

  ## Knative Serving configuration
  knative:
    serving:
      domain: "example.com"              # Domain suffix for Knative services

      ## Deprecated configuration (for backward compatibility)
      services:
        - type: "LoadBalancer"           # Service type: LoadBalancer or NodePort
          domain: "example.com"          # Internal service domain
          # host: "192.168.18.10"        # API server host address
          # port: "30213"                # NodePort value when type=NodePort

  logcollector:
    enabled: true

  ## Disable subCharts same with parent
  envoy:
    enabled: false
  reloader:
    enabled: false
  prometheus:
    enabled: false

## Dataflow service configuration
dataflow:
  enabled: true                          # Enable or disable dataflow service

# AgenticHub configuration
agenticflow:
  image:
    # registry: "docker.io"
    repository: "opencsghq/agenticflow"
    tag: "latest"
    pullPolicy: "IfNotPresent"
    pullSecrets: []

  ## Service configuration
  service: {}
  # port: 7860

  ## Database configuration
  postgresql: {}
    # host: "<pg_host>"                    # PostgreSQL host address
    # port: 5432                           # PostgreSQL port
    # database: "csghub_agentichub"              # Database name
    # user: "csghub"                       # Database username
    # password: ""                         # Database password
    # timezone: "Etc/UTC"                  # Database timezone
  # sslmode: "prefer"                    # SSL mode

  ## Redis configuration
  redis: {}
    # host: "<redis_host>"                 # Redis server hostname or IP
    # port: 6379                           # Redis port number
  # password: ""                         # Redis authentication password

  persistence:
    # storageClass: ""                       # StorageClass for dynamic provisioning
    # accessModes: ["ReadWriteOnce"]         # Volume access permissions
    size: "10Gi"                            # Disk space allocation

# CSGBot configuration
csgbot:
  image:
    # registry: "docker.io"
    repository: "opencsghq/csgbot"
    tag: "latest"
    pullPolicy: "IfNotPresent"
    pullSecrets: []

  ## Service configuration
  service: {}
  # port: 8070

  ## Model configuration
  model:
    chat:
      baseUrl: ""
      apiKey: ""
      model: ""
    codesouler:
      baseUrl: ""
      apiKey: ""
      model: ""
    superAgent:
      baseUrl: ""
      apiKey: ""
      model: ""
    aigateway:
      baseUrl: ""
      apiKey: ""
      model: ""

  ##Credentials config
  environment:
    modelApiKey: ""
    hubAccessToken: ""
    workflowAccessToken: ""
    langflowAccessToken: ""
    serperApiKey: ""
    serpApiKey: ""
    jinaApiKey: ""
    datasetUserToken: ""
    gitlabToken: ""

  ##Configmap configuration
  config:
    llm:
      modelId: ""
      modelBaseUrl: ""
      temperature: 0.1
      useCsghubAigateway: false
    database:
      file: "agno.db"
    opencsg:
      hubAdminUserUuid: ""
      docsDir: "opencsg-docs/docs"
    mcpurls:
      model: ""
      dataset: ""
      code: ""
      finetune: ""
      inference: ""
    mcpProxyServersWebFetch:
      url: ""
      transport: "http"
      requiresJwt: true
    aigateway:
      modelId: ""
    codeSandbox:
      image: "opencsg-registry.cn-beijing.cr.aliyuncs.com/opencsghq/csg-sandbox-python-runner:0.0.11"
      serviceUrl: ""
    claudeCode:
      cmdTemplate: "ccr code --model {model} -p '{query}'{stream_mode}"
      defaultModel: "claude-sonnet-4"
      streamMode: " --output-format stream-json --verbose --include-partial-messages --dangerously-skip-permissions"
    codesouler:
      cmdTemplate: "codesouler chat '{query}'{api_key}{api_base}{model}{mcp_headers_part}{history_part} -o stream-json"
      useAgentTemplate: "codesouler agent use {agent_file_path}"
      useMcpTemplate: 'codesouler mcp add ''{"get_available_tools":{"url":"{domain}/api/v1/csgbot/mcp/get_available_tools/mcp"}}'''
      dataDir: "codesouler_data"
      remoteRepoDir: "codesouler_data/repos"
    dataset:
      userName: ""
    search:
      engine: ""
      useJdGateway: true
      count: 10
      timeout: 10
      threadNum: 4
    deepResearch:
      queryDecomposeMaxSize: 8
      reportLength: 20000
      answerLength: 15000
      singlePageMaxSize: 10000
      reportModel: ""
    integrations:
      fileServerUrl: ""
      feishuNotificationEnabled: true
      phoenixEndpoint: ""
      memmemmachineUrl: ""
    logging:
      logPath: "logs/server.log"
      disableGeniusChat: false
      disablePlannerChat: false
    planner:
      maxReplanCount: 3
      maxClarificationRounds: 3
      executor: "simple"
      requirePlanConfirmation: true
    geniusSandbox:
      sandboxImage: "opencsg-registry.cn-beijing.cr.aliyuncs.com/opencsghq/csg-genius-sandbox-python-runner:latest"
      sandboxServiceUrl: ""
      workspaceVolumePrefix: "/data/csgsandbox_volumes"
    externalDocs:
      enabled: false
    externalDocsApis:
      "CSGHUB": "%s://%s/api/v1/swagger/doc.json"

  ## Disable subCharts same with parent
  envoy:
    enabled: false
  reloader:
    enabled: false
  postgresql:
    enabled: false
  redis:
    enabled: false

csgship:
  enabled: false

  ## Specify configmap name that can be found by job.
  # configmap: "csghub-csgship"

  ## Disable subCharts same with parent
  envoy:
    enabled: false
  reloader:
    enabled: false
  postgresql:
    enabled: false
  redis:
    enabled: false
  casdoor:
    enabled: false

## Accounting service configuration
accounting: {}

## User service configuration
user: {}

## Data viewer configuration
dataviewer: {}

## Mirror service configuration
mirror: {}

## temporalWorker configuration
temporalWorker: {}

#################################################################
##  Built-in Third-party Components                            ##
#################################################################
## Embedded PostgreSQL configuration
postgresql:
  image:
    # registry: "docker.io"
    repository: "opencsghq/postgres"
    tag: "15.10"                             # Image version tag
    pullPolicy: "IfNotPresent"               # Image pull policy
    pullSecrets: []                          # Docker registry secrets

  service:
    type: "ClusterIP"                        # Service type: ClusterIP, NodePort, LoadBalancer
    port: 5432                               # Service port
    protocol: "TCP"                          # Network protocol

  databases:                                 # Databases to create on startup
    - "csghub_casdoor"
    - "csghub_temporal"
    - "csghub_server"
    - "csghub_portal"
    - "csghub_dataflow"
    - "csghub_label_studio"
    - "csghub_csgship"
    - "csghub_xnet"

  parameters: {}                             # PostgreSQL runtime parameters
    # max_connections: 400                   # Dynamic parameters (triggers recreate)
    # shared_buffers: "128MB"                # Shared memory buffers

  persistence:
    # storageClass: ""                       # StorageClass for dynamic provisioning
    # accessModes: ["ReadWriteOnce"]         # Volume access permissions
    size: "50Gi"                             # Disk space allocation

## Built-in Redis configuration
redis:
  image:
    # registry: "docker.io"
    repository: "redis"
    tag: "7.2.5"                             # Image version tag
    pullPolicy: "IfNotPresent"               # Image pull policy
    pullSecrets: []                          # Docker registry secrets

  service:
    type: "ClusterIP"                        # Service type: ClusterIP, NodePort, LoadBalancer
    port: 6379                               # Service port
    protocol: "TCP"                          # Network protocol

  requirePass: false                         # Password requirement

  persistence:
    # storageClass: ""                       # StorageClass for dynamic provisioning
    # accessModes: ["ReadWriteOnce"]         # Volume access permissions
    size: "10Gi"                             # Disk space allocation

## Embedded MinIO configuration
minio:
  image:
    # registry: "docker.io"
    repository: "minio/minio"
    tag: "RELEASE.2025-09-07T16-13-09Z"      # Image version tag
    pullPolicy: "IfNotPresent"               # Image pull policy
    pullSecrets: []                          # Docker registry secrets

  service:
    type: "ClusterIP"                        # Service type: ClusterIP, NodePort, LoadBalancer
    port: 9000                               # Service port
    protocol: "TCP"                          # Network protocol

  console:
    enabled: false                           # Enable console UI
    service:
      port: 9001                             # Console service port
      protocol: "TCP"                        # Network protocol

  gateway:
    enabled: true                            # Enable or disable gateway
    tls: {}                                  # TLS settings
      # enabled: false                       # Enable or disable TLS
      # secretName: ""                       # TLS secret name

  region: "cn-north-1"                       # Storage region

  buckets:                                   # Buckets to be created
    - name: "csghub-registry"                # Bucket name
      policy: "none"                         # Access policy: none, download, public
    - name: "csghub-billing"
      policy: "none"
    - name: "csghub-server"
      policy: "none"
    - name: "csghub-portal"
      policy: "none"
    - name: "csghub-portal-public"
      policy: "download"
    - name: "csghub-runner"
      policy: "none"
    - name: "csghub-xnet"
      policy: "none"

  persistence:
    # storageClass: ""                       # StorageClass for dynamic provisioning
    # accessModes: ["ReadWriteOnce"]         # Volume access permissions
    size: "500Gi"                            # Disk space allocation

## Embedded Registry configuration
registry:
  image:
    # registry: "docker.io"
    repository: "registry"
    tag: "2.8.3"                             # Image version tag
    pullPolicy: "IfNotPresent"               # Image pull policy
    pullSecrets: []                          # Docker registry secrets

  service:
    type: "ClusterIP"                        # Service type: ClusterIP, NodePort, LoadBalancer
    port: 5000                               # Service port
    protocol: "TCP"                          # Network protocol

  logging:
    level: "info"                            # Log level: error, warn, info, debug
    formatter: "json"                        # Log format: json, text, logstash
    accesslog: true                          # Enable access log

  objectStore: {}                            # External object storage
    # endpoint: ""                           # Object storage endpoint URL
    # accessKey: ""                          # Access key for authentication
    # secretKey: ""                          # Secret key for authentication
    # bucket: "csghub-registry"              # Bucket name
    # region: ""                             # Storage region
    # secure: "false"                        # Use secure TLS certificates
    # encrypt: "false"                       # Enable TLS encryption
    # pathStyle: "true"                      # Use path-style addressing

## Embedded Gitaly configuration
gitaly:
  image:
    # registry: "docker.io"
    repository: "opencsghq/gitlab-gitaly"
    tag: "v17.5.0"                           # Image version tag
    pullPolicy: "IfNotPresent"               # Image pull policy
    pullSecrets: []                          # Docker registry secrets

  service:
    type: "ClusterIP"                        # Service type: ClusterIP, NodePort, LoadBalancer
    port: 8075                               # Service port
    protocol: "TCP"                          # Network protocol

  storage: "default"                         # Gitaly storage name

  logging:
    level: "info"                            # Log output level

  persistence:
    # storageClass: ""                       # StorageClass for dynamic provisioning
    # accessModes: ["ReadWriteOnce"]         # Volume access permissions
    size: "200Gi"                            # Disk space allocation

  securityContext:
    runAsUser: 0
    runAsGroup: 0

## Embedded GitLab Shell configuration
gitlabShell:
  image:
    # registry: "docker.io"
    repository: "opencsghq/gitlab-shell"
    tag: "v17.5.0"
    pullPolicy: "IfNotPresent"
    pullSecrets: []

  service:
    type: "ClusterIP"                        # Service type: ClusterIP, NodePort, LoadBalancer
    port: 22                                 # SSH service port
    protocol: "TCP"                          # Network protocol

  rbac:
    create: true                             # Enable RBAC for gateway TCP configuration

  securityContext:
    runAsUser: 0                             # Run as root user

## Embedded NATS configuration
nats:
  image:
    # registry: "docker.io"
    repository: "nats"
    tag: "2.10.16"                           # Image version tag
    pullPolicy: "IfNotPresent"               # Image pull policy
    pullSecrets: []                          # Docker registry secrets

  service:
    type: "ClusterIP"                        # Service type: ClusterIP, NodePort, LoadBalancer
    port: 4222                               # Service port
    protocol: "TCP"                          # Network protocol

  persistence:
    # storageClass: ""                       # StorageClass for dynamic provisioning
    # accessModes: ["ReadWriteOnce"]         # Volume access permissions
    size: "10Gi"                             # Disk space allocation

## Embedded Casdoor configuration
casdoor:
  admin: {}                                  # Initial admin user
    # name: "root"                           # Admin username
    # password: ""                           # Admin password

  image:
    # registry: "docker.io"
    repository: "casbin/casdoor"
    tag: "v2.79.0"                           # Image version tag
    pullPolicy: "IfNotPresent"               # Image pull policy
    pullSecrets: []                          # Docker registry secrets

  service:
    type: "ClusterIP"                        # Service type: ClusterIP, NodePort, LoadBalancer
    port: 8000                               # Service port
    protocol: "TCP"                          # Network protocol

  gateway:
    enabled: true                            # Enable or disable gateway
    tls: {}                                  # TLS settings
      # enabled: false                       # Enable or disable TLS
      # secretName: ""                       # TLS secret name

  postgresql: {}                             # Database configuration
    # host: "<pg_host>"                      # PostgreSQL host address
    # port: 5432                             # PostgreSQL port
    # database: "csghub_casdoor"             # Database name
    # user: "csghub"                         # Database username
    # password: ""                           # Database password
    # timezone: "Etc/UTC"                    # Database timezone
    # sslmode: "prefer"                      # SSL mode

## Embedded Temporal configuration
temporal:
  image:
    # registry: "docker.io"
    repository: "temporalio/auto-setup"
    tag: "1.25.1"                            # Image version tag
    pullPolicy: "IfNotPresent"               # Image pull policy
    pullSecrets: []                          # Docker registry secrets

  service:
    type: "ClusterIP"                        # Service type: ClusterIP, NodePort, LoadBalancer
    port: 7233                               # Service port
    protocol: "TCP"                          # Network protocol

  console:
    enabled: false                           # Enable console UI
    image:
      repository: "temporalio/ui"            # Console UI image repository
      tag: "2.30.3"                          # Console UI image tag
    service:
      port: 8080                             # Console service port
      protocol: "TCP"                        # Network protocol

  gateway:
    enabled: true                            # Enable or disable gateway
    tls: {}                                  # TLS settings
      # enabled: false                       # Enable or disable TLS
      # secretName: ""                       # TLS secret name

  postgresql: {}                             # Database configuration
    # host: "<pg_host>"                      # PostgreSQL host address
    # port: 5432                             # PostgreSQL port
    # database: "csghub_temporal"            # Database name
    # user: "csghub"                         # Database username
    # password: ""                           # Database password
    # timezone: "Etc/UTC"                    # Database timezone
    # sslmode: "prefer"                      # SSL mode

#################################################################
##  Dependent SubCharts                                        ##
##  PLEASE DO NOT UPDATE!!!                                    ##
#################################################################
## Do not modify it unless you know the purpose of the modification.

## Reloader configuration
reloader:
  image:
    name: "opencsghq/stakater-reloader"    # Reloader image name

## Loki log aggregation configuration
loki:
  gateway:
    enabled: false                         # Enable Loki gateway
    basicAuth: {}                          # Basic authentication
      # username: "loki"
      # password: "loki"

  memcachedExporter:
    enabled: false                         # Disable memcached exporter

  deploymentMode: "SingleBinary"           # Deployment mode: SingleBinary or MicroServices

  singleBinary:
    replicas: 1                            # Single binary replicas
    extraVolumeMounts:
      - name: "storage"
        mountPath: "/loki"                 # Storage volume mount
    extraEnv:
      - name: "GOMEMLIMIT"
        value: "3750MiB"                   # Memory limit for Go runtime

  ## Component replication (disabled for distributed mode)
  write:
    replicas: 0                            # Write component replicas
  read:
    replicas: 0                            # Read component replicas
  backend:
    replicas: 0                            # Backend component replicas

  lokiCanary:
    enabled: false                         # Disable Loki canary monitoring

  ## Core Loki configuration
  loki:
    auth_enabled: false                    # Disable authentication
    commonConfig:
      replication_factor: 1                # Data replication factor
      path_prefix: "/loki"                 # Storage path prefix
      ring:
        kvstore:
          store: "inmemory"                # In-memory key-value store
    storage:
      type: "filesystem"                   # Storage type: filesystem
    schemaConfig:
      configs:
        - from: "2024-04-01"
          store: "tsdb"                    # Time-series database store
          object_store: "filesystem"       # Object storage backend
          schema: "v13"                    # Schema version
          index:
            prefix: "loki_index_"          # Index prefix
            period: "24h"                  # Index period
    ingester:
      chunk_encoding: "snappy"             # Chunk encoding compression
    tracing:
      enabled: false                       # Disable tracing
    querier:
      max_concurrent: 2                    # Maximum concurrent queries

  test:
    enabled: false                         # Disable test configuration

  ## Cache configuration
  chunksCache:
    writebackSizeLimit: "10MB"             # Chunks cache writeback size limit
    connectionLimit: 1000
    resources:
      limits:
        memory: "2048Mi"                   # Memory limit
      requests:
        memory: "1024Mi"                   # Memory request

  resultsCache:
    connectionLimit: 1000
    resources:
      limits:
        memory: "1024Mi"                   # Memory limit
      requests:
        memory: "512Mi"                    # Memory request

## Tempo tracing configuration
tempo:
  enabled: false                           # Enable or disable Tempo

## Prometheus monitoring configuration
prometheus:
  enabled: true                            # Enable Prometheus

  gateway:
    enabled: false                         # Enable Prometheus gateway
    basicAuth: {}                          # Basic authentication
      # username: "prometheus"
      # password: ""

## MemMachine configuration
memmachine:
  enabled: false

  model:
    embedding:
      baseUrl: ""                         # OpenAI-compatible embedding endpoint (e.g. https://api.example.com/v1)
      apiKey: ""                          # API key for embedding endpoint
      model: ""                           # Embedding model name
      dimensions: 0                       # Embedding dimensions
    chat:
      baseUrl: ""                         # OpenAI-compatible chat endpoint (e.g. https://api.example.com/v1)
      apiKey: ""                          # API key for chat endpoint
      model: ""                           # Chat model name

envoy:
  enabled: true
